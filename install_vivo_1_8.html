<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-01-04 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Data Distribution API for VIVO &#x2013; Installing in VIVO 1.8</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                data-distribution-api-site
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2018-01-04</span>
                  &nbsp;| <span id="projectVersion">Version: 1.1</span>
                      </div>
            <div class="xright">      
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="motivation.html" title="Why another API?">Why another API?</a>
            </li>
                  <li class="none">
                          <a href="structure.html" title="How does it work?">How does it work?</a>
            </li>
                  <li class="none">
                          <a href="install_vivo_1_10.html" title="Install in VIVO 1.10">Install in VIVO 1.10</a>
            </li>
                  <li class="none">
                          <a href="install_vivo_1_9.html" title="Install in VIVO 1.9">Install in VIVO 1.9</a>
            </li>
                  <li class="none">
            <strong>Install in VIVO 1.8</strong>
          </li>
                  <li class="none">
                          <a href="configuration.html" title="Configuration">Configuration</a>
            </li>
                  <li class="none">
                          <a href="catalog.html" title="Implementations">Implementations</a>
            </li>
                  <li class="none">
                          <a href="cors.html" title="Cross-site distributions">Cross-site distributions</a>
            </li>
                  <li class="none">
                          <a href="apidocs/index.html" title="Javadoc">Javadoc</a>
            </li>
                  <li class="none">
                          <a href="release_notes.html" title="Release notes">Release notes</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                      <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                 
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>Installing in VIVO 1.8</h1>
<p>Install the API in VIVO by following these steps:</p>

<ul>
  
<li>Download the JAR file and add it to your Vitro distribution directory.</li>
  
<li>Edit <tt>web.xml</tt> in VIVO, or in your third tier, if you have one, to establish a <tt>servlet-mapping</tt> for the Data Distribution API.</li>
  
<li>Configure a sample distributor.</li>
  
<li>Build VIVO as you would normally.</li>
</ul>
<p>In these instructions, <tt>{VIVO}</tt> and <tt>{Vitro}</tt> are used to indicate the paths to the directories of the VIVO distribution. </p>
<p>More details are in the sections below.</p>
<p><i><b>Note: These instructions describe how to install a stable release of the API. To install a (non stable) SNAPSHOT, use <a href="installing_the_latest_snapshot.html#vivo1.8">these instructions</a> instead.</b></i></p>
<div class="section">
<h2><a name="Download_the_JAR_file_and_add_it_to_your_Vitro_distribution_directory."></a>Download the JAR file and add it to your Vitro distribution directory.</h2>
<p>The JAR file is located in the <a class="externalLink" href="https://oss.sonatype.org/content/repositories/snapshots">Snapshots repository at Sonotype.org</a>. You can browse through the directory structure to find the most recent snapshot for the API, and download the JAR file. </p>
<p>Alternatively, if you have Maven installed on your machine, you can use this command to fetch the most recent snapshot to the local repository on your machine:</p>

<div class="source">
<div class="source">
<pre>mvn org.apache.maven.plugins:maven-dependency-plugin:get \
    -DgroupId=edu.cornell.library.scholars \
    -DartifactId=data-distribution-api-vivo_1_08 \
    -Dversion=1.1 \
    -Dtransitive=false
</pre></div></div>
<p>When maven completes, you will find the JAR file here:</p>

<div class="source">
<div class="source">
<pre>~/.m2/repository/edu/cornell/library/scholars/data-distribution-api-vivo_1_08/1.1/data-distribution-api-vivo_1_08-1.1.jar
</pre></div></div>
<p>Copy or move the JAR file to your project&#x2019;s top-level <tt>lib</tt> directory.</p>

<ul>
  
<li>If you are using a standard VIVO distribution, add the JAR file to <tt>[VIVO]/lib</tt></li>
  
<li>If you have added a third tier, add the JAR file to the <tt>lib</tt> directory of your third tier.</li>
</ul></div>
<div class="section">
<h2><a name="Edit_web.xml"></a>Edit <tt>web.xml</tt></h2>
<p>You may have several files named <tt>web.xml</tt> in your project. Each tier overrides the previous tier, so:</p>

<ul>
  
<li>if you are using a standard VIVO distribution, you will edit <tt>{VIVO}/webapp/src/main/webapp/web.xml</tt>.</li>
  
<li>If you have added a third tier, with its own <tt>web.xml</tt> file, you should edit that one instead.</li>
  
<li>If you have added a third tier, but it does not contain <tt>web.xml</tt>, you should edit the <tt>web.xml</tt> in VIVO, as above.</li>
</ul>
<p>Add a <tt>&lt;servlet&gt;</tt> tag and a <tt>&lt;servlet-mapping&gt;</tt> tag to associate the <tt>api/dataRequest</tt> with the <tt>DistributeDataApiController</tt>, like this:</p>

<div class="source">
<div class="source">
<pre>  &lt;!-- Data Distribution API --&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;DistributeDataApi&lt;/servlet-name&gt;
    &lt;servlet-class&gt;edu.cornell.library.scholars.webapp.controller.api.DistributeDataApiController&lt;/servlet-class&gt;
  &lt;/servlet&gt;

  &lt;!-- Data Distribution API --&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;DistributeDataApi&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/api/dataRequest/*&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
</pre></div></div>
<p>These tags can be placed anywhere among the other servlet-related tags.</p>
<p>Before editing, you might see this in <tt>web.xml</tt>:</p>
<p><img src="images/web_xml_before.png" alt="web.xml before editing" /></p>
<p>After editing, you would see this:</p>
<p><img src="images/web_xml_after.png" alt="web.xml after editing" /></p></div>
<div class="section">
<h2><a name="Configure_a_distributor"></a>Configure a distributor</h2>
<p>Create a configuration file for the example distributor. The file will contain RDF data that tells the Data Distributor controller how to respond to requests. The file must be created in your VIVO distribution (or your third tier) in <tt>{VIVO}/rdf/display/everytime</tt>.</p>
<p>For this example, create a file named <tt>HelloDistributorConfig.ttl</tt>:</p>

<div class="source">
<div class="source">
<pre>@prefix : &lt;http://vitro.mannlib.cornell.edu/ns/vitro/ApplicationSetup#&gt; .
  
:data_distributor_hello
    a   &lt;java:edu.cornell.library.scholars.webapp.controller.api.distribute.DataDistributor&gt; ,
        &lt;java:edu.cornell.library.scholars.webapp.controller.api.distribute.examples.HelloDistributor&gt; ;
    :actionName &quot;hello&quot; .
</pre></div></div></div>
<div class="section">
<h2><a name="Build_VIVO"></a>Build VIVO</h2>
<p>Run the Ant install script as you would normally.</p>
<h1>Does it work?</h1>
<p>Start your VIVO running and direct your browser to <tt>http://localhost:8080/vivo/api/dataRequest/hello?name=World</tt>. Your browser should display the following message:</p>

<div class="source">
<div class="source">
<pre>Hello, World! 
</pre></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2018.
          All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
